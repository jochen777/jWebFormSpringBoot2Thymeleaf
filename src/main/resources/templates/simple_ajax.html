<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Formchecker</title>

  <link rel="stylesheet"
        href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
        integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO"
        crossorigin="anonymous">

  <!-- Latest compiled and minified JavaScript -->
  <!--  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>  -->
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.js"></script> 
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/gh/jquery-form/form@4.2.2/dist/jquery.form.min.js" integrity="sha384-FzT3vTVGXqf7wRfy8k4BiyzvbNfeYjK+frTVqZeNDFl8woCbF0CYG6g2fMEFFo/i" crossorigin="anonymous"></script>
 

  <!--[if lt IE 9]>
  <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->
  <style type="text/css">
    .error {
      color: red;
    }
  </style>
</head>
<body>

<div style="width:500px; margin-left:50px">
  <h1>Demo2 simple</h1>
  <span th:utext="${form.html}">The form</span>


</div>


	<script> 
    // post-submit callback 
         function processJson(data)  { 
           highlightErrors(data.data);
           setOkFields(data.okdata);
          
             if (data.status == "success") {
              alert('ok');
             } 
             console.log(data);
         } 
     
    function highlightErrors(data) {
      for (var elemName in data) {
        var elemDiv = $('#form-id-'+elemName).parent().parent();
        resetCSSField(elemDiv);
        elemDiv.addClass( "has-error");
      }
    }
    function setOkFields(data) {
      for (var elemName in data) {
        var elemDiv = $('#form_'+elemName).parent().parent();
        resetCSSField(elemDiv);
        elemDiv.addClass( "has-success");
      }
    }
    function resetCSSField(field) {
      field.removeClass("has-error");
      field.removeClass("has-success");
    }
    
        // wait for the DOM to be loaded 
        $(document).ready(function() { 
          
          var options = { 
                  success:       processJson,  // post-submit callback 
           
                  url:       'simple_ajax',         // override for form's 'action' attribute 
                  dataType: 'json'
              }; 
          
            $('#id').ajaxForm(options); 
            
       
        }); 
        
        
    </script> 


</body>
</html>
